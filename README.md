# TBI (The Binding of Isaac Clone)

The Binding of Isaac을 Win32 API와 Direct2D로 구현한 로그라이크 게임 프로젝트입니다.

## 📋 프로젝트 소개

**개발 환경** :  Win32 API + Direct2D

**개발 언어** :  C, C++

**아키텍처** :  컴포넌트 기반 오브젝트 시스템

## 🎮 주요 기능

#### 캐릭터 시스템
- **4명의 플레이어블 캐릭터**: 아이작, 막달레나, 카인, 유다
- **컴포넌트 기반 설계**: Animator, Collider, RigidBody, TextUI, Image
- **다중 애니메이션 시스템**: 여러 애니메이션 동시 재생 지원 (걷기 + 공격 + 이펙트)

#### 맵 생성 시스템
- **절차적 던전 생성**: 매 플레이마다 다른 레이아웃의 던전 자동 생성
- **다양한 방 타입**: 일반 방, 황금 방, 보스 방, 상점, 보물 방
- **그리드 기반 맵**: 셀 단위로 구성된 체계적인 맵 구조

#### 몬스터 AI
- **Factory Pattern 기반 생성**: 타입별 전용 생성 로직
- **다양한 몬스터 타입**: 각기 다른 행동 패턴과 AI
- **Module 시스템**: 몬스터 AI 관리 모듈화

#### 아이템 시스템
- **픽업 아이템**: 동전, 폭탄, 열쇠
- **장비 아이템**: 황금 방에서 획득 가능한 영구 효과 아이템 + 사용 효과가 있는 액티브 아이템
- **폭탄 시스템**: 설치형 아이템

#### UI 시스템
- **Panel UI 구조**: 스탯, 체력, 활성 아이템, 획득 아이템, 미니맵
- **실시간 정보 표시**: unordered_map 기반 데이터 매핑

## 🛠️ 기술 스택 및 구현 기술

### Framework & API
- **Win32 API**: 윈도우 애플리케이션 기반 구조
- **Direct2D**: 2D 그래픽 렌더링

### 핵심 설계 패턴
- **Singleton Pattern**: 매니저 클래스들 (ItemMgr, MapMgr, EntityMgr, PlayerMgr, SceneMgr)
- **Factory Pattern**: 몬스터 생성 시스템 (CMonFactory)
- **Component Pattern**: 오브젝트 시스템 (CObject + Components)
- **Template-Instance Pattern**: 애니메이션 시스템 메모리 최적화

### 핵심 시스템 구현
- **충돌 처리**: 그룹별 충돌 검사 시스템 (Player ↔ Monster)
- **물리 시뮬레이션**: RigidBody 컴포넌트
- **애니메이션**: 프레임 기반 스프라이트 애니메이션


## 📂 프로젝트 구조

```
TBI/
├── Engine/              # 핵심 게임 엔진
│   ├── 01. Header/      # 헤더파일
│   ├── 02. Core/        
│   ├── 03. SingleTon/   # 싱글톤
│   ├── 04. Scene/       # 씬 관리
│   ├── 05. Object/      # 오브젝트
│   ├── 06. Component/   # 충돌체, UI, 애니메이션 컴포넌트
│   ├── 07. Module/      # 몬스터 AI 관리
│   └── 08. Factory/     # 몬스터 생성
├── resources/           # 게임 리소스
│   ├── font/
│   ├── json/            # 몬스터 배치 정보
│   ├── texture/         
│   └── sound/
└── README.md
```

## 🎯 게임 화면 구성

### 메인 화면 (CScene_Main)
1. **타이틀 화면**: Enter/Space로 진행
2. **메뉴 선택**: 방향키 상/하로 메뉴 선택 (현재 '새도전'만 구현)
3. **캐릭터 선택**: 방향키 좌/우로 4명의 캐릭터 중 선택

### 전투 화면 (CScene_Fight)
- **스탯 패널**: 플레이어 능력치 표시
- **체력 UI**: 하트 기반 체력 시스템
- **아이템 슬롯**: 활성 아이템 및 픽업 아이템 정보
- **미니맵**: 던전 전체 구조 표시

## 🏗️ 핵심 클래스 구조

### 오브젝트 계층
```
CObject (부모 클래스)
├── CPlayer (플레이어)
├── CMonster (몬스터 기본 클래스)
│ ├── [다양한 몬스터 타입들]
└── CItem (아이템 기본 클래스)
├── CPickUpItem (수집 가능 아이템)
├── CCollectiblesItem (장식/영구 아이템)
└── CBomb (폭탄 아이템)
```


### 컴포넌트 시스템
- **CAnimator**: 다중 애니메이션 재생 관리
- **CCollider**: 충돌 영역 및 그룹별 충돌 처리
- **CRigidBody**: 물리 시뮬레이션 (속도, 가속도)
- **CTextUI**: UI 텍스트 렌더링
- **CImage**: 이미지 렌더링 및 관리

### 매니저 시스템
- **ItemMgr**: 아이템 소지 관리 및 그래픽 리소스 처리
- **MapMgr**: 로그라이크 던전 자동 생성
- **EntityMgr**: 엔티티 이미지 분할/병합
- **PlayerMgr**: 플레이어 리소스 관리
- **SceneMgr**: 씬 전환 관리
- **Direct2DMgr**: Direct2D 렌더링 관리


## 💡 주요 구현 특징

### 1. 절차적 맵 생성
- 그리드 기반 셀 시스템으로 던전 레이아웃 생성
- 각 셀마다 상세 맵 정보 저장
- JSON 파일로 몬스터 배치 정보 관리

### 2. 컴포넌트 기반 설계
- 오브젝트에 필요한 기능만 선택적으로 추가
- 애니메이션, 충돌, 물리 등을 독립적인 컴포넌트로 분리
- 높은 재사용성과 유지보수성

### 3. 효율적인 애니메이션 시스템
- Template-Instance 패턴으로 메모리 최적화
- 여러 애니메이션 동시 재생 가능
- 독립적인 생명주기 관리

### 4. Factory 패턴 몬스터 생성
- 타입별 전용 생성 함수로 로직 분리
- 정적 팩토리 메서드로 통합 인터페이스 제공


## 📸 게임 플레이

### 시연 영상
([상세내용](https://tobrother.tistory.com/144))

### 주요 플레이 요소
- 4가지 캐릭터 선택
- 절차적으로 생성되는 던전 탐험
- 다양한 몬스터와 전투
- 아이템 수집 및 능력치 강화
- 보스전

